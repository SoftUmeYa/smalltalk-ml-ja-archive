<tt>
&lt;HTML&gt;&lt;BODY&nbsp;style=&quot;word-wrap:&nbsp;break-word;&nbsp;-khtml-nbsp-mode:&nbsp;space;&nbsp;-khtml-line-break:&nbsp;after-white-space;&nbsp;&quot;&gt;はじめまして、佐藤と申します。&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;最近、Jun&nbsp;for&nbsp;Smalltalk&nbsp;のコードを勉強させていただいています。&lt;/DIV&gt;&lt;DIV&gt;早速ですが、ひとつ質問があります。&lt;/DIV&gt;&lt;DIV&gt;Jun740で、以下を&nbsp;do&nbsp;it&nbsp;すると、無限ループしてしまうようにみえます。&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;----&lt;/DIV&gt;&lt;DIV&gt;JunPlane&nbsp;on:&nbsp;0&nbsp;,&nbsp;1&nbsp;,&nbsp;1&nbsp;vertical:&nbsp;(0&nbsp;,&nbsp;0&nbsp;,&nbsp;0&nbsp;to:&nbsp;-1&nbsp;,&nbsp;0&nbsp;,&nbsp;0)&lt;/DIV&gt;&lt;DIV&gt;----&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;コードを追っていくと、#on:vertical:&nbsp;メソッド中の&nbsp;p3&nbsp;を再計算しいる以下の部分、&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;-----&lt;/DIV&gt;&lt;DIV&gt;  &nbsp; p3&nbsp;:=&nbsp;thePoint.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp;((p1&nbsp;to:&nbsp;p2)&nbsp;isParallelWithLine:&nbsp;(p1&nbsp;to:&nbsp;p3)) &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;ifTrue: &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[thirdLine&nbsp;:=&nbsp;firstLine.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;threeAxes&nbsp;:=&nbsp;Array &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with:&nbsp;(0&nbsp;,&nbsp;0&nbsp;,&nbsp;0&nbsp;to:&nbsp;0&nbsp;,&nbsp;0&nbsp;,&nbsp;1)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with:&nbsp;(0&nbsp;,&nbsp;0&nbsp;,&nbsp;0&nbsp;to:&nbsp;1&nbsp;,&nbsp;0&nbsp;,&nbsp;0)&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;with:&nbsp;(0&nbsp;,&nbsp;0&nbsp;,&nbsp;0&nbsp;to:&nbsp;0&nbsp;,&nbsp;1&nbsp;,&nbsp;0).&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;thirdAxis&nbsp;:=&nbsp;threeAxes &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;detect:&nbsp;[:line&nbsp;|&nbsp;(line&nbsp;to&nbsp;=&nbsp;firstAxis&nbsp;to)&nbsp;not&nbsp;and:&nbsp;[(line&nbsp;to&nbsp;=&nbsp;secondAxis&nbsp;to)&nbsp;not]].&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;aTransformation&nbsp;:=&nbsp;Jun3dTransformation&nbsp;translate:&nbsp;thirdAxis&nbsp;to.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;thePoint&nbsp;:=&nbsp;nil.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[thePoint&nbsp;isNil&nbsp;or:&nbsp;[thePoint&nbsp;equal:&nbsp;p2]]&nbsp;whileTrue: &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[thirdLine&nbsp;:=&nbsp;thirdLine&nbsp;transform:&nbsp;aTransformation.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;thePoint&nbsp;:=&nbsp;aPlane&nbsp;intersectingPointWithLine:&nbsp;thirdLine].&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;p3&nbsp;:=&nbsp;thePoint].&lt;/DIV&gt;&lt;DIV&gt;-----&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;が、おかしいように思われました。文章ではうまく説明しにくいのですが、ここで、thirdAxis&nbsp;を求める必要はなく、最初の&nbsp;p3&nbsp;の計算時とは違う方向に移動させれば良いだけだと判断し、上記部分を以下のように書き換えてみました。&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;-----&lt;/DIV&gt;&lt;DIV&gt;  &nbsp; p3&nbsp;:=&nbsp;thePoint.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp;((p1&nbsp;to:&nbsp;p2)&nbsp;isParallelWithLine:&nbsp;(p1&nbsp;to:&nbsp;p3)) &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp;ifTrue: &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[thirdLine&nbsp;:=&nbsp;firstLine.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;aTransformation&nbsp;:=&nbsp;Jun3dTransformation&nbsp;translate:&nbsp;firstAxis&nbsp;to.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;thePoint&nbsp;:=&nbsp;nil.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[thePoint&nbsp;isNil&nbsp;or:&nbsp;[thePoint&nbsp;equal:&nbsp;p2]]&nbsp;whileTrue: &lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;[thirdLine&nbsp;:=&nbsp;thirdLine&nbsp;transform:&nbsp;aTransformation.&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;thePoint&nbsp;:=&nbsp;aPlane&nbsp;intersectingPointWithLine:&nbsp;thirdLine].&lt;/DIV&gt;&lt;DIV&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;p3&nbsp;:=&nbsp;thePoint].&lt;/DIV&gt;&lt;DIV&gt;-----&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;このようにすると、無限ループしなくなったのですが、ここで質問があります。&lt;/DIV&gt;&lt;DIV&gt;この修正は、今回のケース&nbsp;&quot;JunPlane&nbsp;on:&nbsp;0&nbsp;,&nbsp;1&nbsp;,&nbsp;1&nbsp;vertical:&nbsp;(0&nbsp;,&nbsp;0&nbsp;,&nbsp;0&nbsp;to:&nbsp;-1&nbsp;,&nbsp;0&nbsp;,&nbsp;0)&quot; でたまたまうまくいっただけなのでしょうか、それとも、あらゆるケースで通用するものなのでしょうか。&lt;/DIV&gt;&lt;DIV&gt;どなたかご回答いただければ幸いです。&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;DIV&gt;以上、よろしくお願いします。&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;BR&gt;&lt;BR&gt;&lt;DIV&gt;&nbsp;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;border-spacing:&nbsp;0px&nbsp;0px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;text-align:&nbsp;auto;&nbsp;-khtml-text-decorations-in-effect:&nbsp;none;&nbsp;text-indent:&nbsp;0px;&nbsp;-apple-text-size-adjust:&nbsp;auto;&nbsp;text-transform:&nbsp;none;&nbsp;orphans:&nbsp;2;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;&quot;&gt;&lt;SPAN&nbsp;class=&quot;Apple-style-span&quot;&nbsp;style=&quot;border-collapse:&nbsp;separate;&nbsp;border-spacing:&nbsp;0px&nbsp;0px;&nbsp;color:&nbsp;rgb(0,&nbsp;0,&nbsp;0);&nbsp;font-family:&nbsp;Helvetica;&nbsp;font-size:&nbsp;12px;&nbsp;font-style:&nbsp;normal;&nbsp;font-variant:&nbsp;normal;&nbsp;font-weight:&nbsp;normal;&nbsp;letter-spacing:&nbsp;normal;&nbsp;line-height:&nbsp;normal;&nbsp;text-align:&nbsp;auto;&nbsp;-khtml-text-decorations-in-effect:&nbsp;none;&nbsp;text-indent:&nbsp;0px;&nbsp;-apple-text-size-adjust:&nbsp;auto;&nbsp;text-transform:&nbsp;none;&nbsp;orphans:&nbsp;2;&nbsp;white-space:&nbsp;normal;&nbsp;widows:&nbsp;2;&nbsp;word-spacing:&nbsp;0px;&nbsp;&quot;&gt;&lt;DIV&gt;--&lt;/DIV&gt;&lt;DIV&gt;&lt;A&nbsp;href=&quot;mailto:shortsleeved@mac.com&quot;&gt;shortsleeved@mac.com&lt;/A&gt;&lt;/DIV&gt;&lt;DIV&gt;&lt;BR&nbsp;class=&quot;khtml-block-placeholder&quot;&gt;&lt;/DIV&gt;&lt;BR&nbsp;class=&quot;Apple-interchange-newline&quot;&gt;&lt;/SPAN&gt;&lt;/SPAN&gt;&nbsp;&lt;/DIV&gt;&lt;BR&gt;&lt;/BODY&gt;&lt;/HTML&gt;
</tt>
